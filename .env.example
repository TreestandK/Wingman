# Wingman Game Server Manager - Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# REQUIRED SETTINGS - Must be configured for Wingman to work
# =============================================================================

# Domain Configuration
DOMAIN=yourdomain.com

# Flask Secret Key (REQUIRED)
# Generate a secure secret key with: python3 -c "import secrets; print(secrets.token_hex(32))"
FLASK_SECRET_KEY=change-this-to-a-long-random-secret-key-minimum-32-characters

# =============================================================================
# INITIAL ADMIN SETUP
# =============================================================================
# On first startup, Wingman will generate a one-time setup token and display it
# in the logs. Use this token to log in as 'admin' and set your password.
# Check the logs with: docker logs <container_name>
#
# The token looks like: One-time token: xK7mN9pQ2rS5tU8vW1xY4zA7bC0dE3fG

# =============================================================================
# AUTHENTICATION SETTINGS (Optional)
# =============================================================================

# Enable/disable authentication (default: true)
ENABLE_AUTH=true

# Enable secure session cookies - set to true when using HTTPS (default: false)
SESSION_COOKIE_SECURE=false

# Enable SAML SSO authentication (default: false)
ENABLE_SAML=false

# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# --- Password Policy ---
# Minimum password length (default: 12)
PASSWORD_MIN_LENGTH=12

# Require uppercase letters in passwords (default: true)
PASSWORD_REQUIRE_UPPERCASE=true

# Require lowercase letters in passwords (default: true)
PASSWORD_REQUIRE_LOWERCASE=true

# Require digits in passwords (default: true)
PASSWORD_REQUIRE_DIGIT=true

# Require special characters in passwords (default: true)
PASSWORD_REQUIRE_SPECIAL=true

# --- Account Lockout ---
# Number of failed login attempts before lockout (default: 5)
LOCKOUT_THRESHOLD=5

# Lockout duration in minutes (default: 15)
LOCKOUT_DURATION_MINUTES=15

# --- Session Security ---
# Session inactivity timeout in minutes (default: 60)
SESSION_TIMEOUT_MINUTES=60

# Absolute session lifetime in hours (default: 24)
SESSION_ABSOLUTE_TIMEOUT_HOURS=24

# --- Security Headers ---
# Enable HSTS header - only enable with HTTPS (default: false)
ENABLE_HSTS=false

# HSTS max-age in seconds (default: 31536000 = 1 year)
HSTS_MAX_AGE=31536000

# X-Frame-Options header value (default: DENY)
X_FRAME_OPTIONS=DENY

# Referrer-Policy header value (default: strict-origin-when-cross-origin)
REFERRER_POLICY=strict-origin-when-cross-origin

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# SQLite database path (default: sqlite:////app/data/wingman.db)
DATABASE_URL=sqlite:////app/data/wingman.db

# =============================================================================
# OIDC SSO CONFIGURATION (Optional - for Keycloak, Okta, Azure AD, etc.)
# =============================================================================

# Enable OIDC authentication (default: false)
ENABLE_OIDC=false

# OIDC Provider Configuration
OIDC_ISSUER=https://keycloak.example.com/realms/wingman
OIDC_CLIENT_ID=wingman
OIDC_CLIENT_SECRET=your-client-secret-here
OIDC_DISPLAY_NAME=Company SSO

# OIDC Scopes (default: openid profile email)
OIDC_SCOPES=openid profile email

# Role mapping: JSON mapping OIDC groups/roles to Wingman roles
# Example: {"admin": ["wingman-admins"], "operator": ["wingman-operators"]}
OIDC_ROLE_MAPPING={}

# Default role for new SSO users if no role mapping matches (default: viewer)
OIDC_DEFAULT_ROLE=viewer

# =============================================================================
# CLOUDFLARE CONFIGURATION
# =============================================================================

CF_API_TOKEN=your_cloudflare_api_token_here
CF_ZONE_ID=your_cloudflare_zone_id_here

# =============================================================================
# NGINX PROXY MANAGER CONFIGURATION
# =============================================================================

NPM_API_URL=http://nginx-proxy-manager:81/api
NPM_EMAIL=admin@example.com
NPM_PASSWORD=changeme

# =============================================================================
# UNIFI CONFIGURATION (Optional)
# =============================================================================

UNIFI_URL=https://unifi-controller:8443
UNIFI_USER=admin
UNIFI_PASS=changeme
UNIFI_SITE=default
UNIFI_IS_UDM=false

# =============================================================================
# PTERODACTYL CONFIGURATION (Optional)
# =============================================================================

PTERO_URL=https://panel.yourdomain.com
PTERO_API_KEY=your_pterodactyl_api_key_here

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================

# Public IP address (leave empty for auto-detection)
PUBLIC_IP=

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Automatically configure UniFi port forwarding
ENABLE_AUTO_UNIFI=true

# Automatically request SSL certificates via NPM
ENABLE_SSL_AUTO=true

# Enable advanced monitoring features
ENABLE_MONITORING=false
